<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Lots of R code is illegal | Robert Greener</title><meta name=keywords content="licensing,R"><meta name=description content="The R ecosystem has appeared to completely ignore free-software licensing"><meta name=author content="Robert Greener"><link rel=canonical href=https://r0bert.dev/posts/2022/09/04/r-licensing-is-a-mess/><link crossorigin=anonymous href=/assets/css/stylesheet.bc1149f4a72aa4858d3a9f71462f75e5884ffe8073ea9d6d5761d5663d651e20.css integrity="sha256-vBFJ9KcqpIWNOp9xRi915YhP/oBz6p1tV2HVZj1lHiA=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://r0bert.dev/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://r0bert.dev/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://r0bert.dev/favicon-32x32.png><link rel=apple-touch-icon href=https://r0bert.dev/apple-touch-icon.png><link rel=mask-icon href=https://r0bert.dev/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="Lots of R code is illegal"><meta property="og:description" content="The R ecosystem has appeared to completely ignore free-software licensing"><meta property="og:type" content="article"><meta property="og:url" content="https://r0bert.dev/posts/2022/09/04/r-licensing-is-a-mess/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-09-04T00:00:00+00:00"><meta property="article:modified_time" content="2022-09-04T00:00:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Lots of R code is illegal"><meta name=twitter:description content="The R ecosystem has appeared to completely ignore free-software licensing"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"Posts","item":"https://r0bert.dev/posts/"},{"@type":"ListItem","position":3,"name":"Lots of R code is illegal","item":"https://r0bert.dev/posts/2022/09/04/r-licensing-is-a-mess/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Lots of R code is illegal","name":"Lots of R code is illegal","description":"The R ecosystem has appeared to completely ignore free-software licensing","keywords":["licensing","R"],"articleBody":"Disclaimer: I am not a lawyer, this is just my opinion as lay-person with experience with free-software.\nThe R ecosystem appears to completely disregard the restrictions imposed by common free-software licenses, in particular the GNU General Public License (GPL). Briefly, the GPL is a copyleft license that requires derivative works to also be licensed under the GPL. This means that if I use a GPL-licensed library in my code, it must also be released under the GPL. In legal wording, from the GPL version 3, it says:\nYou may convey a work based on the Program, or the modifications to produce it from the Program, in the form of source code under the terms of section 4, provided that you also meet all of these conditions:\na) The work must carry prominent notices stating that you modified it, and giving a relevant date.\nb) The work must carry prominent notices stating that it is released under this License and any conditions added under section 7. This requirement modifies the requirement in section 4 to “keep intact all notices”.\nc) You must license the entire work, as a whole, under this License to anyone who comes into possession of a copy. This License will therefore apply, along with any applicable section 7 additional terms, to the whole of the work, and all its parts, regardless of how they are packaged. This License gives no permission to license the work in any other way, but it does not invalidate such permission if you have separately received it.\nd) If the work has interactive user interfaces, each must display Appropriate Legal Notices; however, if the Program has interactive interfaces that do not display Appropriate Legal Notices, your work need not make them do so.\nThe important part here is part c. You must license the entire work under the GPL. The R ecosystem appears to wilfully ignore this requirement, to the detriment of its users.\nTake tidyverse, a group of packages. The meta-package is licensed under the MIT license (basically free to do anything). This is used by loads of professional R developers. This imports dplyr, also MIT licensed. dplyr imports pillar, also MIT licensed. pillar imports fansi, GPL licensed – uh oh. As pillar is a derivative work of fansi, pillar should be GPL licensed. Therefore, dplyr should be GPL licensed. That means, tidyverse should be also! That means that nearly all R code written should be GPL licensed.\nThis isn’t even the only case. tidyverse depends on broom which depends on backports (GPL), dplyr (should be GPL), purrr (GPL), stringr (GPL), tibble (depends on fansi (GPL) and pillar (should be GPL)), etc. It’s GPL all over!\nEven more mental is that tidyverse depends on purrr (GPL version 3) and stringr (GPL version 2 only). GPLv2 and GPLv3 are incompatible1! So there is literally no way that any code using tidyverse is compliant with its license.\nNow, that would be fine, if users knew that. I have no issue with the GPL, if you installed tidyverse and it was clear that the code was GPL-licensed, and therefore your code would be GPL-licensed, that’s fine – you know what you’re agreeing too. However, all users see is that they import tidyverse and it’s MIT licensed, so they assume are not bound by the GPL. But they are, their code depends on GPL licensed code transitively – it still applies to them. I have not seen such a mess in any other ecosystem, though if you know of any feel free to leave a comment.\nPerhaps the issue is so prevalent in R as most of the packages have been developed by statisticians, rather than software developers. Free software developers are used to dealing with these issues and generally know when it is okay, and when it is not okay, to use code given its license.\nTo be thorough, there is some debate as to whether dynamically-linked code, as is the case with R, is protected under the GPL. However, the Free Software Foundation, the authors of the GPL, state “if you distribute modules meant to be linked together by the user, you have made them into a combined work, and you must release the entire combined work under the GNU GPL. In other words: dynamic vs. static linking never makes any difference on the outcome of the analysis. The FSF has been advised by several US lawyers on this matter over the years, and the answer is always this one.”.\nIt gets even worse. generics is an R package that is depended on as part of many of the tidyverse packages and is developed by RStudio. On the 2nd of September 2020, it was relicensed from the GPL version 2 to the permissive MIT license. It is not clear to me what authority they had to do that. For example, take the first pull-request from an external contributor in June 20182. The contributor Alex Hayes, contributed some functions to add generics for broom. We must assume that by contributing that Alex was content to release his code under the terms of the GPL version 2, the project license. We cannot assume that he would also be happy to release it under the more permissive MIT license, he has not given us the right. Now, Alex may not, and I’d suggest probably doesn’t, care; however, we cannot make that assumption. If Alex wanted to enforce his rights he could require that generics be returned to the GPL and any of its reverse dependencies also. This is not the only example of it in this repository.\nSo, what is the solution, if people involved with R even want to fix it? Option 1 is to relicense anything that depends on GPL-licensed code as being licensed under the GPL. Option 2 is to remove any GPL-licensed code from tidyverse. There is no option to relicense existing GPL code as MIT licensed code unless ALL contributors agree. It would be great if R package developers could take a more careful view on software licensing in future.\nWhat’s the solution if people involved with R don’t fix it? Use Python or Julia.\nhttps://www.gnu.org/licenses/license-list.en.html#GPLv2 ↩︎\nhttps://github.com/r-lib/generics/pull/1 ↩︎\n","wordCount":"1026","inLanguage":"en","datePublished":"2022-09-04T00:00:00Z","dateModified":"2022-09-04T00:00:00Z","author":{"@type":"Person","name":"Robert Greener"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://r0bert.dev/posts/2022/09/04/r-licensing-is-a-mess/"},"publisher":{"@type":"Organization","name":"Robert Greener","logo":{"@type":"ImageObject","url":"https://r0bert.dev/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://r0bert.dev accesskey=h title="Robert Greener (Alt + H)">Robert Greener</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://r0bert.dev/archives/ title=Archive><span>Archive</span></a></li><li><a href=https://r0bert.dev/presentations/ title=Presentations><span>Presentations</span></a></li><li><a href=https://hg.sr.ht/~ragreener1 title=hg><span>hg</span>&nbsp;<svg fill="none" shape-rendering="geometricPrecision" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li><li><a href=https://r0bert.dev/about/ title="Robert Greener"><span>About</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>Lots of R code is illegal</h1><div class=post-description>The R ecosystem has appeared to completely ignore free-software licensing</div><div class=post-meta><span title='2022-09-04 00:00:00 +0000 UTC'>September 4, 2022</span>&nbsp;·&nbsp;Robert Greener</div></header><div class=post-content><p><strong>Disclaimer: I am not a lawyer, this is just my opinion as lay-person with experience with free-software.</strong></p><p>The R ecosystem appears to completely disregard the restrictions imposed by common free-software licenses, in particular the <a href=https://www.gnu.org/licenses/licenses.html>GNU General Public License</a> (GPL).
Briefly, the GPL is a copyleft license that requires derivative works to also be licensed under the GPL.
This means that if I use a GPL-licensed library in my code, it <em>must</em> also be released under the GPL.
In legal wording, from the GPL version 3, it says:</p><blockquote><p>You may convey a work based on the Program, or the modifications to produce it from the Program, in the form of source code under the terms of section 4, provided that you also meet all of these conditions:</p><p>a) The work must carry prominent notices stating that you modified it, and giving a relevant date.</p><p>b) The work must carry prominent notices stating that it is released under this License and any conditions added under section 7. This requirement modifies the requirement in section 4 to “keep intact all notices”.</p><p>c) You must license the entire work, as a whole, under this License to anyone who comes into possession of a copy. This License will therefore apply, along with any applicable section 7 additional terms, to the whole of the work, and all its parts, regardless of how they are packaged. This License gives no permission to license the work in any other way, but it does not invalidate such permission if you have separately received it.</p><p>d) If the work has interactive user interfaces, each must display Appropriate Legal Notices; however, if the Program has interactive interfaces that do not display Appropriate Legal Notices, your work need not make them do so.</p></blockquote><p>The important part here is part c.
You must license the entire work under the GPL.
The R ecosystem appears to wilfully ignore this requirement, to the detriment of its users.</p><p>Take tidyverse, a group of packages.
The meta-package is licensed under the MIT license (basically free to do anything).
This is used by loads of professional R developers.
This imports dplyr, also MIT licensed.
dplyr imports pillar, also MIT licensed.
pillar imports fansi, GPL licensed &ndash; uh oh.
As pillar is a derivative work of fansi, pillar should be GPL licensed.
Therefore, dplyr should be GPL licensed.
That means, tidyverse should be also!
That means that nearly all R code written should be GPL licensed.</p><p>This isn&rsquo;t even the only case.
tidyverse depends on broom which depends on backports (GPL), dplyr (should be GPL), purrr (GPL), stringr (GPL), tibble (depends on fansi (GPL) and pillar (should be GPL)), etc.
It&rsquo;s GPL all over!</p><p>Even more mental is that tidyverse depends on purrr (GPL version 3) and stringr (GPL version 2 only).
GPLv2 and GPLv3 are incompatible<sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup>!
So there is literally no way that any code using tidyverse is compliant with its license.</p><p>Now, that would be fine, if users knew that.
I have no issue with the GPL, if you installed tidyverse and it was clear that the code was GPL-licensed, and therefore your code would be GPL-licensed, that&rsquo;s fine &ndash; you know what you&rsquo;re agreeing too.
However, all users see is that they import tidyverse and it&rsquo;s MIT licensed, so they assume are not bound by the GPL.
But they are, their code depends on GPL licensed code transitively &ndash; it still applies to them.
I have not seen such a mess in any other ecosystem, though if you know of any feel free to leave a comment.</p><p>Perhaps the issue is so prevalent in R as most of the packages have been developed by statisticians, rather than software developers.
Free software developers are used to dealing with these issues and generally know when it is okay, and when it is not okay, to use code given its license.</p><p>To be thorough, there is some debate as to whether dynamically-linked code, as is the case with R, is protected under the GPL.
However, the Free Software Foundation, the authors of the GPL, state &ldquo;if you distribute modules meant to be linked together by the user, you have made them into a combined work, and you must release the entire combined work under the GNU GPL.
In other words: dynamic vs. static linking never makes any difference on the outcome of the analysis. The FSF has been advised by several US lawyers on this matter over the years, and the answer is always this one.&rdquo;.</p><p>It gets even worse.
<a href=https://github.com/r-lib/generics>generics</a> is an R package that is depended on as part of many of the tidyverse packages and is developed by RStudio.
On the 2nd of September 2020, it was relicensed from the GPL version 2 to the permissive MIT license.
It is not clear to me what authority they had to do that.
For example, take the first pull-request from an external contributor in June 2018<sup id=fnref:2><a href=#fn:2 class=footnote-ref role=doc-noteref>2</a></sup>.
The contributor Alex Hayes, contributed some functions to add generics for broom.
We must assume that by contributing that Alex was content to release his code under the terms of the GPL version 2, the project license.
We cannot assume that he would also be happy to release it under the more permissive MIT license, he has not given us the right.
Now, Alex may not, and I&rsquo;d suggest probably doesn&rsquo;t, care; however, we cannot make that assumption.
If Alex wanted to enforce his rights he could require that generics be returned to the GPL and any of its reverse dependencies also.
This is not the only example of it in this repository.</p><p>So, what is the solution, if people involved with R even want to fix it?
Option 1 is to relicense anything that depends on GPL-licensed code as being licensed under the GPL.
Option 2 is to remove any GPL-licensed code from tidyverse.
<strong>There is no option to relicense existing GPL code as MIT licensed code unless ALL contributors agree</strong>.
It would be great if R package developers could take a more careful view on software licensing in future.</p><p>What&rsquo;s the solution if people involved with R don&rsquo;t fix it?
Use Python or Julia.</p><div class=footnotes role=doc-endnotes><hr><ol><li id=fn:1><p><a href=https://www.gnu.org/licenses/license-list.en.html#GPLv2>https://www.gnu.org/licenses/license-list.en.html#GPLv2</a>&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:2><p><a href=https://github.com/r-lib/generics/pull/1>https://github.com/r-lib/generics/pull/1</a>&#160;<a href=#fnref:2 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></div></div><footer class=post-footer><ul class=post-tags><li><a href=https://r0bert.dev/tags/licensing/>licensing</a></li><li><a href=https://r0bert.dev/tags/r/>R</a></li></ul></footer><div id=disqus_thread></div><script type=application/javascript>var disqus_config=function(){this.page.url="https://r0bert.dev/posts/2022/09/04/r-licensing-is-a-mess/",this.page.identifier="https://r0bert.dev/posts/2022/09/04/r-licensing-is-a-mess/",this.page.title="Lots of R code is illegal"};(function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//r0bert-dev.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)})()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></article></main><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><footer class=footer><span>&copy; CC-BY-4.0 2022 <a href=https://r0bert.dev>Robert Greener</a></span></footer><script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script id=MathJax-script async src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script>
<script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>